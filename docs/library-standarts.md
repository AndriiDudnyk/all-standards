
Базовые стандарты оформления rollun-com библиотек
=================================================

Данный раздел описывает каким образом должны быть оформлены библиотеки в rollun-com. 
Эти правила и рекомендации должны придерживаться все разработчики библиотек для rollun-com.
Раздел также полезен новым сотрудникам и пользователям, так как им будет легче ориентироваться в проекте, 
зная структуру и правила оформление.

Ключевыми словами «НЕОБХОДИМО» («MUST»), «НЕДОПУСТИМО» («MUST NOT»), «ТРЕБУЕТСЯ» («REQUIRED»), 
«НУЖНО» («SHALL»), «НЕ ПОЗВОЛЯЕТЬСЯ» («SHALL NOT»), «СЛЕДУЕТ» («SHOULD»), «НЕ СЛЕДУЕТ» («SHOULD NOT»), 
«РЕКОМЕНДУЕТСЯ» («RECOMMENDED»), «ВОЗМОЖНО» («MAY») и «НЕОБЯЗАТЕЛЬНЫЙ» («OPTIONAL») в этом документе 
для интерпретации, как описано в [RFC 2119](http://www.ietf.org/rfc/rfc2119.txt) 
([перевод на русский](http://rfc.com.ru/rfc2119.htm)).


### 1. Config providers

Правила создание и хранение конфигурационных файлов ([config providers](https://docs.zendframework.com/zend-config-aggregator/config-providers/)).

* РЕКОМЕНДУЕТСЯ добавлять ConfigProvider к каждному созданому модулю.
* НЕОБХОДИМО, чтобы ConfigProvider был invokable объэктом и был назван `ConfigProvider.php`.
* НЕОБХОДИМО, чтобы ConfigProvider находился в корне _src_ директории соотвествующего модуля.
* НЕОБХОДИМО, чтобы модуль имел только один ConfigProvider.
* НЕОБХОДИМО добавлять информацию о каждном созданом ConfigProvider в `composer.json` в раздел _config-provider_.

Пример `ConfigProvider.php`:

```php
<?php
namespace Module;

class ConfigProvider 
{
    public function __invoke(){
        return [
            'abstract_factories' => [
                //...
            ];
            'aliases' => [
                //...
            ]
        ];
    }
}

```

Пример раздела в `composer.json`:

```json
"extra": {
    "zf": {
        "config-provider": [
            "Module\\ConfigProvider"
        ]
    }
}
```


### 2. Документация

Правила оформления документации к библиотеке.

##### 2.1 Язык

* РЕКОМЕНДУЕТСЯ использовать русский язык для оформления документации. 
* Собственные слова и слова которые более понятны на английском языке РЕКОМЕНДУЕТСЯ писать на английском.

Пример слов которые стоит писать на английском: `batch`, `ConfigProvider`, `callback` (более понятно чем `колбэк`)

##### 2.2 Где и в каком формате хранить

* Для создания документации к библиотеке НЕОБХОДИМО использовать [mkdocs](https://www.mkdocs.org/), а для ее хранения 
НЕОБХОДИМО использовать [GitHub Pages](https://pages.github.com/).
* Файлы конфигурации mkdocs проекта нужна хранить в репозитории (! имя репозитория) в папку с названием библиотеки.

Пример файлов конфигурации mkdocs:

```
┌── .
├── ..
├── docs/
│   └── index.md
└── mkdocs.yml
```

* Исходные mkdocs файлы (готовый build) РЕКОМЕНДУЕТЬСЯ хранить в корне проекта в ветке `gh-pages`.

Пример файлов докуметации в ветке `gh-pages`:

```
┌── .
├── ..
├── css/
├── fonts/
├── img/
├── js/
├── search/
├── 404.html
├── index.html
└── sitemap.xml
```


### 4. Container

* В библеотеках в качестве `container` НЕОБХОДИМО использовать только 
[ServiceManager](https://github.com/zendframework/zend-servicemanager).
* ServiceManager НЕДОПУСТИМО использовать кроме как для тестирование и для написания примеров работы библиотеки
* Все файлы конфигурации для ServiceManager НЕОБХОДИМО хранить в `config` директории и подключать их в `config/config.php`.
* Сам ServiceManager НЕОБХОДИМО получать из файла `config/container.php`.

##### 4.1 Зависимость подгружаемых конфигурационных файлов от окружения

Структура директорий и обязательные файли
-----------------------------------------

Учитывая выше перечислинные требования к оформлению библиотеки можно сформулировать общие правила для структурирование директорий,
а также указать обязательные файлы.

##### 3.1 Структура файлов/директорий в корневой директории

* НЕОБХОДИМЫЕ директории: `src`, `test`, `example`, `public`, `config`.
* НЕОБХОДИМЫЕ файлы: `.gitignore`, `composer.json`, `phpunit.xml.dist`.
* Другие директорий кроме выше указанных НЕДОПУСТИМЫ.

##### 3.2 Структура файлов/директорий в `public` директории

* В данной директории НЕОБХОДИМО, чтобы находился файл `index.php`, 
который являеться точкой входа в приложение через http(s).
* Стили, шрифты, изображения и js-скрипты, если таковы имеються НЕОБХОДИМО размещать в папках 
`css`, `fonts`, `img` и `js` соответсвенно.

Пример:

```
┌── .
├── ..
├── config/
│   ├── config.php
│   └── container.php
├── example
├── public/
│   ├── css/
│   ├── fonts/
│   ├── img/
│   ├── js/
│   └── index.php
├── src/
└── test/
    └── autoload.php

```



